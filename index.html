<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pdfjs-viewer-element</title>
    <meta name="description" content="A web component for viewing pdf files in the browser, based on PDF.js">
    <script type="module" src="/src/pdfjs-viewer-element.ts"></script>
  </head>
  <body style="margin: 0">
    <pdfjs-viewer-element 
      src="/fake-file.pdf" 
      viewer-path="/pdfjs-3.10.111-dist"
      style="height: min(500px, 50dvh)">
    </pdfjs-viewer-element>
    <pdfjs-viewer-element 
      id="hideOpenFileViewer"
      src="/sample-pdf-with-images.pdf" 
      viewer-path="/pdfjs-3.10.111-dist"
      locale="de"
      page="2"
      style="height: min(500px, 50dvh)">
    </pdfjs-viewer-element>
    <button onclick="document.querySelector('#hideOpenFileViewer').setAttribute('hide-open-file', true)">Hide open file</button>
    <button onclick="document.querySelector('#hideOpenFileViewer').setAttribute('hide-open-file', false)">Show open file</button>
    <pdfjs-viewer-element 
      id="themedViewer"
      src="/sample-pdf-10MB.pdf" 
      viewer-path="/pdfjs-3.10.111-dist"
      viewer-css-theme="DARK"
      locale="es"
      style="height: min(500px, 50dvh)">
    </pdfjs-viewer-element>
    <button onclick="document.querySelector('#themedViewer').setAttribute('viewer-css-theme', 'LIGHT')">Change theme</button>
    <button onclick="document.querySelector('#themedViewer').setAttribute('viewer-css-theme', 'DARK')">Reset theme</button>
    <button onclick="document.querySelector('#themedViewer').setAttribute('page', '2')">Change page</button>
    <button onclick="document.querySelector('#themedViewer').setAttribute('page', '1')">Reset page</button>
    <button onclick="document.querySelector('#themedViewer').setAttribute('locale', 'de')">Change locale</button>
    <button onclick="document.querySelector('#themedViewer').setAttribute('locale', 'es')">Reset locale</button>
    <pdfjs-viewer-element
      id="base-viewer"
      viewer-path="/pdfjs-3.10.111-dist"
      locale="uk"
      viewer-extra-styles="#openFile { display: none; } #print { display: none } #download { display: none } #download + .verticalToolbarSeparator { display: none }"
      style="height: min(500px, 50dvh)">
    </pdfjs-viewer-element>
    <button onclick="document.querySelector('#base-viewer').setAttribute('viewer-css-theme', 'DARK')">Change theme</button>
    <button onclick="document.querySelector('#base-viewer').setAttribute('viewer-css-theme', 'AUTOMATIC')">Reset theme</button>
    <button onclick="document.querySelector('#base-viewer').setAttribute('page', '2')">Change page</button>
    <button onclick="document.querySelector('#base-viewer').setAttribute('page', '1')">Reset page</button>
    <button onclick="document.querySelector('#base-viewer').setAttribute('locale', 'de')">Change locale</button>
    <button onclick="document.querySelector('#base-viewer').setAttribute('locale', 'uk')">Reset locale</button>
    <button onclick="document.querySelector('#base-viewer').setAttribute('viewer-extra-styles', '')">Remove extra styles</button>
  </body>

  <script>
    const pdfData = Uint8Array.from(atob(
    'JVBERi0xLjcKCjEgMCBvYmogICUgZW50cnkgcG9pbnQKPDwKICAvVHlwZSAvQ2F0YWxvZwog' +
    'IC9QYWdlcyAyIDAgUgo+PgplbmRvYmoKCjIgMCBvYmoKPDwKICAvVHlwZSAvUGFnZXMKICAv' +
    'TWVkaWFCb3ggWyAwIDAgMjAwIDIwMCBdCiAgL0NvdW50IDEKICAvS2lkcyBbIDMgMCBSIF0K' +
    'Pj4KZW5kb2JqCgozIDAgb2JqCjw8CiAgL1R5cGUgL1BhZ2UKICAvUGFyZW50IDIgMCBSCiAg' +
    'L1Jlc291cmNlcyA8PAogICAgL0ZvbnQgPDwKICAgICAgL0YxIDQgMCBSIAogICAgPj4KICA+' +
    'PgogIC9Db250ZW50cyA1IDAgUgo+PgplbmRvYmoKCjQgMCBvYmoKPDwKICAvVHlwZSAvRm9u' +
    'dAogIC9TdWJ0eXBlIC9UeXBlMQogIC9CYXNlRm9udCAvVGltZXMtUm9tYW4KPj4KZW5kb2Jq' +
    'Cgo1IDAgb2JqICAlIHBhZ2UgY29udGVudAo8PAogIC9MZW5ndGggNDQKPj4Kc3RyZWFtCkJU' +
    'CjcwIDUwIFRECi9GMSAxMiBUZgooSGVsbG8sIHdvcmxkISkgVGoKRVQKZW5kc3RyZWFtCmVu' +
    'ZG9iagoKeHJlZgowIDYKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDEwIDAwMDAwIG4g' +
    'CjAwMDAwMDAwNzkgMDAwMDAgbiAKMDAwMDAwMDE3MyAwMDAwMCBuIAowMDAwMDAwMzAxIDAw' +
    'MDAwIG4gCjAwMDAwMDAzODAgMDAwMDAgbiAKdHJhaWxlcgo8PAogIC9TaXplIDYKICAvUm9v' +
    'dCAxIDAgUgo+PgpzdGFydHhyZWYKNDkyCiUlRU9G'), (m) => m.codePointAt(0));


    document.addEventListener('DOMContentLoaded', async () => {
      const viewer = document.querySelector('#base-viewer')
      // viewer.addEventListener('loaded', () => {
      //   console.log(viewer.iframe)
      // })
      // Wait for the viewer initialization
      const viewerApp = await viewer.initialize()
      // Open PDF file data using Uint8Array instead of URL
      viewerApp.open(pdfData)
    })
  </script>
</html>
